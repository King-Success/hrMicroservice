{"changed":true,"filter":false,"title":"EloquentEmployeeRankInfoRepository.php","tooltip":"/app/Repositories/EmployeeRank/EloquentEmployeeRankInfoRepository.php","value":"<?php\n\nnamespace App\\Repositories\\EmployeeRank;\n\nuse App\\EmployeeRank;\nuse App\\Repositories\\EmployeeRank\\EmployeeRankContract;\nuse App\\Events\\EmployeeAssignedRank;\nuse App\\Repositories\\Rank\\RankContract;\n\nclass EloquentEmployeeRankInfoRepository implements EmployeeRankContract\n{\n    protected $rankModel;\n    \n    public function __construct(RankContract $rankContract){\n        $this->rankModel = $rankContract;\n    }\n    \n    public function create($request) {\n        $employeeRankInfo = new EmployeeRank;\n\n        // Set the EmployeeRank properties\n        $this->setEmployeeRankInfoProperties($employeeRankInfo, $request);\n\n        $employeeRankInfo->save();\n        event(new EmployeeAssignedRank($this->rankModel->findById($employeeRankInfo->rank_id)->toArray(), \n            $employeeRankInfo->employee_id));\n        return $employeeRankInfo;\n    }\n\n    public function edit($employeeRankInfoId, $request) {\n        $employeeRankInfo = $this->findById($employeeRankInfoId);\n\n        // Edit the EmployeeRank properties\n        $this->setEmployeeRankInfoProperties($employeeRankInfo, $request);\n\n        $employeeRankInfo->save();\n        event(new EmployeeAssignedRank($this->rankModel->findById($employeeRankInfo->rank_id)->toArray(), \n            $employeeRankInfo->employee_id));\n        return $employeeRankInfo;\n    }\n\n    public function findAll() {\n        return EmployeeRank::all();\n    }\n\n    public function findById($employeeRankInfoId) {\n        return EmployeeRank::find($employeeRankInfoId);\n    }\n    \n    public function findByEmployeeId($employeeId){\n        return EmployeeRank::where('employee_id', $employeeId)->first();\n    }\n\n    public function remove($employeeRankInfoId) {\n        $employeeRankInfo = $this->findById($employeeRankInfoId);\n        return $employeeRankInfo->delete();\n    }\n\n    private function setEmployeeRankInfoProperties($employeeRankInfo, $request) {\n        // Assign attributes to the employeeRankInfo here\n        $employeeRankInfo->employee_id = $request->employee;\n        $employeeRankInfo->rank_id = $request->rank;\n    }\n}\n","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":5,"column":46},"end":{"row":5,"column":50},"action":"remove","lines":["Info"],"id":2},{"start":{"row":9,"column":64},"end":{"row":9,"column":68},"action":"remove","lines":["Info"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":9,"column":6},"end":{"row":9,"column":40},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1484474660885}